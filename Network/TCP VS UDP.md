# TCP VS UDP

---

## 1️⃣TCP

- 신뢰성 있는 데이터 전송을 지원하는 연결 지향형 프로토콜
- 3-way handshake라는 과정을 통해 연결을 설정하고 통신 시작
- 4-way handshake라는 과정을 통해 연결을 해제
- `흐름 제어, 혼잡 제어, 오류 제어를 통해 신뢰성 보장`
- 데이터의 전송 순서를 보장하며 수신 여부 확인 가능



### 💡 TCP는 패킷을 어떻게 추적 및 관리할까?

- 데이터는 패킷 단위로 나누어 목적지로 전송되는데 패킷에 고유 번호를 부여하여 분실 확인 처리를 하기 위해 목적지에서 `패킷을 재조립`한다.
- 이런 방식으로 TCP 패킷을 추적하며, 나누어 보내진 데이터를 목적지에서 받고 재조립한다.



### 💡 흐름 제어

- 송신측과 수신측 사이의 데이터 처리 속도 차이를 해결하기 위한 기법
- 송신측의 전송량 > 수신측의 처리량일 경우 전송된 패킷은 수신측의 큐를 넘어서 손실될 수 있기 때문에 송신측의 패킷 전송량을 제어

1. Stop and Wait (정지 - 대기)
    - 매번 전송한 패킷에 대한 확인 응답을 받아야 그 다음 패킷을 전송할 수 있다. = 비효율적
2. Sliding Window
    - 수신측에서 설정한 윈도우 크기만큼 송신측에서 확인 응답 없이 세그먼트를 전공하여 데이터 흐름을 동적으로 조절하는 기법
    - Stop and Wait를 개선한 기법
    
    

### 💡 오류 제어

- 오류 검출과 재전송 역할 수행
- ARQ 기법을 사용해 프레임이 손상되었거나 손실되었을 경우, 재전송을 통해 오류를 복구

1. Stop and Wait ARQ
    - 송신측에서 1개의 프레임을 송신하고, 수신측에서 ACK or NAK를 보내는 방식
    - 데이터가 분실되었거나 NAK를 받은 경우 송신측에서 데이터 재전송

1. Go-Back-n ARQ
    - 전송된 프레임이 손상되거나 분실된 경우, ACK 패킷의 손실로 인해 TIME OUT 이 발생한 경우 확인된 마지막 프레임 이후로 재전송

1. Selective-Reject ARQ
    - GBn ARQ의 단점을 보완한 기법
    - SR ARQ는 손상된, 손실된 프레임만 재전송
    - 별도의 데이터 재정렬 수행
    
    

### 💡 혼잡 제어

- 송신측의 데이터 전달과 네트워크의 데이터 처리 속도를 해결하기 위한 방법

1. AIMD(Additive Increase Multicative Decrease)
    - 합 증가 / 곱 감소 알고리즘
    - 전송한 패킷이 문제 없이 도착했다면 Window Size를 1씩 증가시키며 전송, 패킷 전송 실패 및 TIME_OUT 발생 시 Window Size를 절반으로 감소시킨다.
    - 네트워크가 혼잡해지는 상황을 미리 감지하지 못하여 혼잡해지고 나서야 대역폭을 줄이는 방식
    - 처음 전송 속도를 올리는 데 소요되는 시간이 너무 길다는 단점이 있다.
    
2. Slow Start
    - AIMD와 마찬가지로 패킷을 보내 문제 없이 도착했다면 Window Size를 1씩 늘리고 한 주기가 지나면 Window Size는 2배가 된다.
    - 혼잡 현상이 발생하면 Window Size를 1로 변경
    - 한번 혼잡 현상이 발생하고 나면 네트워크의 수용량을 어느정도 예상할 수 있기 떄문에 혼잡 현상이 발생했던 Window Size의 절반까지만 지수 함수 꼴로 증가시키고 그 이후부터는 1씩 증가시키는 방식
    
3. 빠른 회복
    - 혼잡 상태 발생 시 Window Size를 절반으로 줄여 선형 증가시키는 방법

1. 빠른 재전송
    - 수신측에서 패킷을 받을 때 먼저 도착해야 할 패킷보다 다음 패킷이 먼저 도착한 경우에도 ACK 패킷을 보낸다. 단, 순서대로 잘 도착한 패킷에 다음 패킷 순번은 ACK 패킷에 실어서 보낸다. 따라서 패킷이 손실될 경우에 순번이 중복된 ACK 패킷을 받게 되어 이를 통해 문제가 되는 순번의 패킷을 재전송 할 수 있다.
    - 중복된 순번의 패킷을 3개 받으면 재전송, Window Size 절반으로 줄인다.
    
    

## 2️⃣UDP

- 비연결형 프로토콜로 사전에 연결 설정 없이 데이터를 전달
- 데이터를 데이터 그램 단위로 처리하는 프로토콜
    - 데이터 그램 : 독립적인 관계를 지니는 패킷
- 데이터 그램 방식을 통해 전달하기 때문에 잘못된 경로로 전송될 수 있다.
- 송신측에서 전송한 패킷 순서와 수신측에서 도착한 패킷의 순서가 다를 수 있으나 순서를 부여하거나 재조립하지 않는다.
- 흐름 제어, 혼잡 제어, 오류 제어를 하지 않으므로 손상된 세그먼트에 대한 재전송을 하지 않는다.
  
    → 속도가 빠르며 네트워크 부하가 적다.
    
    → 신뢰성 있는 데이터 전송을 보장하지 못한다.
    
- 대표적으로 RTP, Multicast 서비스