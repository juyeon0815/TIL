# JWT

## JWT란?

- JSON Web Token의 약자로, 당사자 간에 정보를 JSON 개체로 안전하게 전송하기 위한 간결하고 자체 포함된 방법을 정의하는 개방형 표준



## 😒JWT는 언제 사용할까?

- 권한 부여 : 사용자가 로그인하기위해 JWT가 포함되어 사용자가 해당 토큰으로 허용되는 경로, 서비스 및 리소스에 엑세스할 수 있다.
- 정보 교환 : 당사자 간에 정보를 안전하게 전송하는 방법



## 웹 토큰 구조

![stun](/res/tokenStructure.png)

- header : 토큰 타입과, 어떤 암호화 알고리즘을 사용할지 식별

- payload : 토큰에 담을 클레임 정보
    - 등록된 클레임 : 미리 정의된 클레임의 집합

        ex) iss(발급자), exp(만료시간), sub(제목), aud(대상) ..

    - 공개 클레임 : 마음대로 정의
    - 비공개 클레임 : 당사자간에 정보를 공유하기 위해 생성된 맞춤클레임
    
- signature :  secret key를 포함하여 암호화



## 🙆🏻‍♀️JWT 동작과정

- 토큰 기반의 인증 방식

![stun](/res/jwtProcess.png)

1. 애플리케이션 또는 클라이언트가 서버에 권한 부여 요청
2. 권한이 부여되면 서버에서 애플리케이션 액세스 토큰 반환
3. 애플리케이션은 액세스 토큰을 사용하여 보호된 리스소에 접근

![stun](/res/token.png)



- 장점
    1. 멀티 디바이스 클라이언트를 대응하는데 부담이 적다
    2. 클라이언트 세션 관리에 대한 서버의 메모리 부담을 줄일 수 있다.
    3. 다양한 도메인을 대응하는데 부담이 적다.

    
    
- 단점
    1. 클라이언트의 토큰 정보가 탈취된다면 보안에 취약
    2. 토큰에 Signature 등의 부가적인 정보가 담겨 있어 서버와 클라이언트 간 주고 받는 데이터가 세션 기반의 인증보다 많다.
    3. 토큰 인증을 위해 Database를 매번 조회해야하기 때문에 DB에 성능 부하가 있을 수 있다.