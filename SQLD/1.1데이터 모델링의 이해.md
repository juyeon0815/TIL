## 데이터 모델링의 이해



### 모델링의 이해

> 모델링이란 표기법에 의해 규칙을 가지고 표기하는 것 자체를 의미

- 모델링의 특징

  - 추상화 : 다양한 현상을 일정한 양식인 표기법에 의해 표현

  - 단순화 : 복잡한 현실세계를 약속된 규약에 의해 제한된 표기법이나 언어로 표현하여 쉽게 이해할 수 있도록 하는 개념을 의미
  - 명확화 : 누구나 이해하기 쉽게하기 위해 대상에 대한 애매모호함을 제거하고 정확하게 현상을 기술



- 모델링의 중요성
  - 파급효과 : 시스템 구축이 완성되어 가는 시점에선 데이터 구조의 변경이 일어난다면 전체 시스템 구축 프로젝트에서 큰 위험요소가 아닐 수 없다.
  - 복잡한 정보 요구사항의 간결한 표현 : 구출할 시스템의 정보 요구사항과 한계를 가장 명확하고 간결하게 표현할 수 있는 도구
  - 데이터 품질 : 데이터 구조 문제로 인해 중복 데이터의 미정의, 데이터 구조의 비즈니스 정의의 불충분, 동일한 성격의 데이터를 통합하지 않고 분리함으로써 나타는 데이터 불일치 등의 데이터 구조의 문제로 데이터의 품질이 저하될 수 있다.



- 모델링할 때 유의점
  - 중복 : 데이터베이스가 여러 장소에 같은 정보를 저장하지 않도록 한다.
  - 비유연성 : 사소한 업무변화에 데이터모델이 변경됨으로써 유지보수의 어려움을 가중시킬 수 있다. 데이터 정의를 데이터의 사용 프로세스와 분리함으로써 데이터, 프로세스의 작은 변화로 큰 변화를 일으킬 수 있는 가능성을 줄인다.
  - 비일관성 : 데이터와 데이터 간 상호 연관 관계에 대한 명확한 정의를 통해 데이터의 비일관성이 발생하지 않도록 한다.



- 모델링의 3단계
  - 개념적 데이터 모델링 : 추상화 수준이 높고 업무중심적이고 포괄적인 수준의 모델링
  - 논리적 데이터 모델링 : 시스템으로 구축하고자 하는 업무에 대해 키, 속성, 관계 등 정의
    - 데이터 모델링 과정의 가장 핵심 단계
    - 정규화 수행
  - 물리적 데이터 모델링 : 실제로 데이터베이스에 이식할 수 있도록 성능, 저장 등 물리적인 성격을 고려하여 설계



- 데이터 독립성

  - 지속적으로 증가하는 유지보수 비용을 절감하고 데이터 복잡도를 낮추며 중복된 데이터를 줄이기 위한 목적
  - 데이터독립성 구성 요소

  |    항목     |                            내용                             |   비고   |
  | :---------: | :---------------------------------------------------------: | :------: |
  | 외부 스키마 |         - View 단계 여러 개의 사용자 관점으로 구성          |          |
  | 개념 스키마 |  - 모든 사용자 관점을 통합한 조직 전체의 DB를 기술하는 것   | 통합관점 |
  | 내부 스키마 | - 내부단계, 내부 스키마로 구성, DB가 물리적으로 저장된 형식 |          |

  - 논리적 물리적 데이터독립성

    |    독립성     |                             내용                             |                  특징                  |
    | :-----------: | :----------------------------------------------------------: | :------------------------------------: |
    | 논리적 독립성 | - 개념 스키마가 변경되어도 외부 스키마에는 영향을 미치지 않도록 지원 |      사용자 특성에 맞게 변경가능       |
    | 물리적 독립성 | - 내부스키마가 변경되어도 외부/개념 스키마는 영향을 받지 않도록 지원하는 것 | 물리적 구조 영향없이 개념구조 변경가능 |

    

- 좋은 데이터 모델의 요소
  - 완전성 : 업무에서 필요로 하는 모든 데이터가 데이터 모델에 정의되어 있어야 한다.
  - 중복배제 : 하나의 데이터베이스 내에 동일한 사실은 반드시 한 번만 기록해야 한다.
  - 업무규칙 : 데이터 모델을 사용하는 모든 사용자가 해당 규칙에 대해서 동일한 판단을 하고 데이터를 조작할 수 있어야한다.
  - 데이터 재사용 : 통합 모델을 통해 데이터 재사용성을 향상시킬 수 있다.
  - 의사소통 : 엔티티, 서브타입, 속성, 관계 등의 형태로 자세하게 표현되어야 한다.
  - 통합성 : 공유 데이터에 대한 구조를 여러 업무 영역에서 공동으로 사용하기 용이하게 정의해야한다.



### 엔티티

> 업무에 필요하고 유용한 정보를 저장하고 관리하기 위한 집합적인 것

- 엔티티의 특징
  - 유일한 식별자에 의해 식별이 가능해야 한다.
  - 영속적으로 존재하는 인스턴스의 집합이어야 한다.
  - 엔티티는 반드시 속성이 있어야 한다.
  - 엔티티는 다른 엔티티와 최소 한 개 이상의 관계가 있어야 한다.



### 속성

> 업무에서 필요로 하는 인스턴스로 관리하고자 하는 의미상 더 이상 분리되지 않는 최소의 데이터 단위

- 속성의 특징

  - 해당 업무에서 필요하고 관리하고자 하는 정보이어야 한다.
  - 정해진 주식별자에 함수적 종속성을 가져야 한다.
  - 하나의 속성에는 한 개의 값만을 가진다.

  

- 속성의 특성에 따른 분류
  - 기본 속성 : 가장 일반적인 속성
  - 설계 속성 : 데이터 모델링을 위해, 업무를 규칙화하기 위해 속성을 새로 만들거나 변형하여 정의하는 속성
  - 파생 속성 : 다른 속성에 영향을 받아 발생하는 속성 (ex) 계산된 값)



### 관계

> 엔티티의 인스턴스 사이의 논리적인 연관성으로서 존재의 형태로서나 행위로서 서로에게 연관성이 부여된 상태

- 관계 표기법
  - 관계명 : 관계의 이름
    - 두 엔티티 간 어떤 관계인지 파악할 수 없는 애매한 동사는 피한다.
    - 현재형으로 표현한다.
  - 관계차수 : 1:1, 1:M, M:N
  - 관계선택사양 : 필수관계, 선택관계
    - 필수참여관계 : ex) 지하철은 문이 닫혀야만 출발한다.
      - 참여하는 모든 참여자가 반드시 관계를 가지는, 타 엔티티의 참여자와 연결이 되어야 하는 관계
    - 선택참여관게 : ex) 지하철 안내방송은 어느시점에서해도 상관없다.



### 식별자

> 엔티티내에서 인스턴스들을 구분할 수 있는 구분자

- 식별자의 특징

  - 모든 인스턴스들이 유일하게 구분되어야 한다.

  - 주식별자를 구성하는 속성의 수는 유일성을 만족하는 최소의 수가 되어야 한다.

  - 주식별자의 값은 자주 변하지 않는 값이어야 한다.

  - 주식별자가 지정이 되면 반드시 값이 들어와야 한다.

    |  특징  |                             내용                             |                  비고                  |
    | :----: | :----------------------------------------------------------: | :------------------------------------: |
    | 유일성 |          엔티티내에 모든 인스턴스들을 유일하게 구분          |                사원번호                |
    | 최소성 | 주식별자를 구성하는 속성의 수는 유일성을 만족하는 최소의 수가 되어야 함 | 사원분류코드+ 사원번호는 부적절한 구조 |
    | 불변성 |              그 식별자의 값은 변하지 않아야 함               |                                        |
    | 존재성 |               반드시 데이터 값이 존재 (NULL X)               |   사원번호가 없는 회사직원은 존재 X    |



- 식별자 분류

  |   식별자    |                             설명                             |
  | :---------: | :----------------------------------------------------------: |
  |  주식별자   | 엔티티 내에서 각 어커런스를 구분할 수 있는 구분자이며, 타 엔티티와 참조관계를 연결 할 수 있는 식별자 |
  | 보조식별자  | 엔티티 내에서 각 어커런스를 구분할 수 있으나, 대표성을 가지지 못해 참조관계 연결을 못함 |
  | 내부식별자  |           엔티티 내부에서 스스로 만들어지는 식별자           |
  | 외부식별자  |  타 엔티티와의 관계를 통해 타 엔티티로부터 받아오는 식별자   |
  | 단일 식별자 |                하나의 속성으로 구성된 식별자                 |
  | 복합식별자  |               둘 이상의 속성으로 구성된 식별자               |
  | 본질식별자  |                업무에 의해 만들어지는 식별자                 |
  | 인조식별자  | 업무적으로 만들어지지는 않지만 원조식별자가 복잡한 구조를 가지고 있을 때 인위적으로 만든 식별자 |